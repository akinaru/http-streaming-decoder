<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>http-streaming-decoder-cpp by akinaru</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">http-streaming-decoder-cpp</h1>
      <h2 class="project-tagline">HTTP streaming decoder in C++</h2>
      <a href="https://github.com/akinaru/http-streaming-decoder" class="btn">View on GitHub</a>
      <a href="https://github.com/akinaru/http-streaming-decoder/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/akinaru/http-streaming-decoder/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="http-streaming-decoder" class="anchor" href="#http-streaming-decoder" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>HTTP streaming decoder</h1>

<p><a href="https://travis-ci.org/akinaru/http-streaming-decoder"><img src="https://travis-ci.org/akinaru/http-streaming-decoder.svg?branch=master" alt="Build Status"></a>
<a href="LICENSE.md"><img src="http://img.shields.io/:license-mit-blue.svg" alt="License"></a></p>

<p><a href="http://akinaru.github.io/http-streaming-decoder">http://akinaru.github.io/http-streaming-decoder</a></p>

<p>C++ HTTP streaming decoder for Qt4/Qt5</p>

<ul>
<li>parse HTTP data streaming</li>
<li>non-blocking process</li>
<li>compatible with non-blocking or blocking socket architecture</li>
</ul>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>First you have to declare the <code>httpdecoder</code> object</p>

<pre><code>httpdecoder decoder;
</code></pre>

<p>Then instantiate a new <code>httpconsumer</code> : this object will monitor your data streaming decoding and will contain decoded frame(s)</p>

<pre><code>httpconsumer *consumer = new httpconsumer;
</code></pre>

<p>For both of them you'll need these import :</p>

<pre><code>#include "protocol/http/httpdecoder.h"
#include "protocol/inter/http/httpconsumer.h"
</code></pre>

<p>Your data streaming will be put to a <code>QByteArray *</code> to be sent to http decoder :</p>

<pre><code>QByteArray *httpframe = new QByteArray("POST /rest/help/todo HTTP/1.1\r\nheaders1:  value1\r\nheaders2:  value2\r\nContent-Length:  15\r\n\r\nbodyTobeWritten\r\n")
</code></pre>

<p>Eventually decode with : </p>

<pre><code>decoder.httpdecode(consumer,httpFrame);
</code></pre>

<ul>
<li><p>Result of decoding will be in your pointer to consumer object you have just created</p></li>
<li><p>You can access to decoded frame with <code>consumer-&gt;getHttpFrameList()</code> which is a <code>vector&lt;httpconsumer*&gt;</code> you can iterate</p></li>
<li><p>Then you can remove frame you have treated and re-loop to decode again with the same object</p></li>
<li><p>You must delete your consumer when you are done with it (socket destroyed / destructor ...)</p></li>
</ul>

<p>Complete example in <a href="httpdecoder-test/launcher.cpp">httpdecoder-test/launcher.cpp</a></p>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<pre><code>httpdecoder decoder;

httpconsumer *consumer = new httpconsumer;

QByteArray *httpframe = "POST /rest/help/todo HTTP/1.1\r\nheaders1:  value1\r\nheaders2:  value2\r\nContent-Length:  15\r\n\r\nbodyTobeWritten\r\nHTTP/1.1 200 OK\r\n\r\n";

httpframe = new QByteArray(data1);

decoder.httpdecode(consumer,httpframe);
</code></pre>

<p>From consumer object <code>consumer-&gt;getHttpFrameList()</code> you can extract those fields : </p>

<table>
<thead>
<tr>
<th>method name</th>
<th>return data type</th>
<th>description</th>
<th>example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>getUri()</code></td>
<td><code>std::string</code></td>
<td>http uri</td>
<td>"/api/rest"</td>
</tr>
<tr>
<td><code>getMethod()</code></td>
<td><code>std::string</code></td>
<td>http method</td>
<td>"POST"</td>
</tr>
<tr>
<td><code>getBody()</code></td>
<td><code>std::string</code></td>
<td>http body</td>
<td>"{\"data\":\"OK\"}"</td>
</tr>
<tr>
<td><code>getQueryString()</code></td>
<td><code>std::string</code></td>
<td>http querystring</td>
<td>"Not Found"</td>
</tr>
<tr>
<td><code>getStatusCode()</code></td>
<td><code>int</code></td>
<td>http status code</td>
<td>404</td>
</tr>
<tr>
<td><code>getHeaders()</code></td>
<td><code>std::map&lt;std::string,std::string&gt;</code></td>
<td>http headers</td>
<td>("Content-Length","15")</td>
</tr>
</tbody>
</table>

<h2>
<a id="integrate-in-your-project" class="anchor" href="#integrate-in-your-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Integrate in your project</h2>

<ul>
<li>from a submodule</li>
</ul>

<pre><code>git submodule add git://github.com/akinaru/http-streaming-decoder.git
</code></pre>

<p>and in your <code>project.pro</code> :</p>

<pre><code>TEMPLATE = subdirs
SUBDIRS = http-streaming-decoder your-app
your-app.depends = http-streaming-decoder
</code></pre>

<p>with in <code>your-app.pro</code> :</p>

<pre><code>TARGET = your-app
SOURCES = main.cpp
INCLUDEPATH += ../http-streaming-decoder/httpdecoder/release
LIBS += -L../http-streaming-decoder/httpdecoder/release -lhttpdecoder
</code></pre>

<h2>
<a id="build-library" class="anchor" href="#build-library" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build library</h2>

<pre><code>qmake
make
</code></pre>

<h2>
<a id="projects-using-this-library" class="anchor" href="#projects-using-this-library" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Projects using this library</h2>

<ul>
<li><a href="https://github.com/akinaru/websocket-non-blocking">https://github.com/akinaru/websocket-non-blocking</a></li>
</ul>

<h2>
<a id="compatibility" class="anchor" href="#compatibility" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Compatibility</h2>

<ul>
<li>Qt4</li>
<li>Qt5</li>
</ul>

<h2>
<a id="specification" class="anchor" href="#specification" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Specification</h2>

<ul>
<li><a href="https://www.ietf.org/rfc/rfc2616.txt">https://www.ietf.org/rfc/rfc2616.txt</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/akinaru/http-streaming-decoder">http-streaming-decoder-cpp</a> is maintained by <a href="https://github.com/akinaru">akinaru</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-62569105-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
